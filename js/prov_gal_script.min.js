document.addEventListener("DOMContentLoaded",(function(){const moduleScript=document.createElement("script");moduleScript.type="module",moduleScript.src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js";const noModuleScript=document.createElement("script");noModuleScript.setAttribute("nomodule",""),noModuleScript.src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js",document.body.appendChild(moduleScript),document.body.appendChild(noModuleScript);const proweaverGalleryList=document.querySelectorAll("#proweaver_gallery_list img"),proweaverGalleryListClass=document.querySelectorAll("#proweaver_gallery_list li");let currentIndex=0,isImageClicked=!1;function createViewer(){if(!document.querySelector(".proweaver_gall_viewer_con")){const viewerHTML='\n      <div class="proweaver_gall_viewer_con">\n        <div class="proweaver_gall_holder">\n            <div class="proweaver_gall_header">\n                <div id="pro_gallery_counterList" class="proweaver_header_right_con"><span id="prov_current_gallery_show">0</span>/<span id="prov_total_gall_list">0</span></div>\n                <div class="proweaver_header_left_con">\n                    <div class="prov_image_sizer">\n                        <span title="Zoom" class="zoom_function"><ion-icon name="search-outline"></ion-icon> <ion-icon class="zoom_plus" name="add-outline"></ion-icon></span>\n                        <select name="" id="prov_zooming_selector">\n                            <option value="100%">100%</option>\n                            <option value="90%">90%</option>\n                            <option value="80%">80%</option>\n                        </select>\n                    </div>\n                    <div title="Gallery" id="prov_view_min_gallery"  class="prov_view_min_gallery"><ion-icon name="grid-outline"></ion-icon></div>\n                    <div title="Close" id="prov_gall_close" class="prov_gall_close"><ion-icon name="close-outline"></ion-icon></div>\n                </div>\n            </div>\n            <div class="proweaver_gall_img_viewer">\n                <figure>\n                    <img id="gallery_img_id_viewer" class="zoom" src="" alt="">\n                </figure>\n            </div>\n            <div class="prov_gallery_controller">\n              <div class="prov_conroller prov_prev"><ion-icon name="chevron-back-outline"></ion-icon></div>\n              <div class="prov_conroller prov_next"><ion-icon name="chevron-forward-outline"></ion-icon></div>\n          </div>\n        </div>\n        <div id="prov_min_gall_list" class="prov_min_gall_list">\n            <ul id="prov_thumb_list" class="prov_thumb_list">\n                \n            </ul>\n        </div>\n      </div>',galleryListCon=document.getElementById("proweaver_gallery_list");galleryListCon.insertAdjacentHTML("afterend",viewerHTML)}}function updateViewer(index){const galleryItemsImg=proweaverGalleryList[index],galleryItemsImgAlt=galleryItemsImg.alt;$("#gallery_img_id_viewer").fadeOut(150,(function(){$(this).attr("src",galleryItemsImg.src).attr("alt",galleryItemsImgAlt||"image").fadeIn(150)})),$(".proweaver_gall_viewer_con").show().fadeIn(),$(".proweaver_gall_viewer_con").addClass("toggleproweaver_gall_viewer_con");const provCurrentGalleryShow=document.getElementById("prov_current_gallery_show");$("body").css("overflow","hidden"),provCurrentGalleryShow.innerHTML=index+1,highlightMatchingThumbnail(galleryItemsImg.src)}function highlightMatchingThumbnail(viewerSrc){const proweaverMiniGalleryListClass=document.querySelectorAll("#prov_thumb_list li");proweaverMiniGalleryListClass.forEach(item=>{const img=item.querySelector("img");item.classList.remove("min_gall_selected"),img&&img.src===viewerSrc&&item.classList.add("min_gall_selected")})}createViewer(),proweaverGalleryList.forEach((galleryItems,index)=>{let provGalleryCounter;galleryItems.id=`galleryItems-${index+1}`,galleryItems.classList="gallImg",document.getElementById("prov_total_gall_list").innerHTML=`${index+1}`,galleryItems.hasAttribute("loading")||galleryItems.setAttribute("loading","lazy")}),$(".gallImg").each((function(){const altValue=$(this).attr("alt");altValue||$(this).attr("alt","image")})),proweaverGalleryListClass.forEach((galleryItems,index)=>{galleryItems.classList.add("prov_gall_list"),galleryItems.addEventListener("click",(function(){isImageClicked=!0,currentIndex=index,updateViewer(currentIndex),createViewer()}))}),document.querySelector(".prov_prev").addEventListener("click",(function(){0!==proweaverGalleryList.length&&(isImageClicked=!0,currentIndex=currentIndex>0?currentIndex-1:proweaverGalleryList.length-1,updateViewer(currentIndex),resetZoom(),viewer.css({transform:"scale(1) translate(0px, 0px)",transition:"none"}))})),document.querySelector(".prov_next").addEventListener("click",(function(){0!==proweaverGalleryList.length&&(isImageClicked=!0,currentIndex=currentIndex<proweaverGalleryList.length-1?currentIndex+1:0,updateViewer(currentIndex),resetZoom(),viewer.css({transform:"scale(1) translate(0px, 0px)",transition:"none"}))})),$(window).on("wheel",(function(event){isImageClicked&&(currentIndex=event.originalEvent.deltaY>0?currentIndex<proweaverGalleryList.length-1?currentIndex+1:0:currentIndex>0?currentIndex-1:proweaverGalleryList.length-1,updateViewer(currentIndex))})),document.addEventListener("click",(function(event){const target=event.target;target.closest("#proweaver_gallery_list")||target.closest("#gallery_img_id_viewer")||(isImageClicked=!1)}));let provViewMinGallery=document.getElementById("prov_view_min_gallery"),proMinGallList=document.getElementById("prov_min_gall_list");document.addEventListener("keydown",(function(event){"Escape"===event.key&&($(".proweaver_gall_viewer_con").fadeOut(),document.getElementById("gallery_img_id_viewer").src="",$("body").css("overflow","scroll"),proMinGallList.classList.remove("toggle_prov_min_gall_list"),isImageClicked=!1,resetZoom())})),provViewMinGallery.addEventListener("click",(function(){proMinGallList.classList.toggle("toggle_prov_min_gall_list")})),$("#prov_gall_close").click((function(){$(".proweaver_gall_viewer_con").fadeOut(),document.getElementById("gallery_img_id_viewer").src="",isImageClicked=!1,$("body").css("overflow","unset"),resetZoom()}));let provOriginalList=document.querySelectorAll("#proweaver_gallery_list li"),proMiniThumbnailList=document.getElementById("prov_thumb_list");provOriginalList.forEach(provThumbList=>{let proNewItem=document.createElement("li");proNewItem.innerHTML=provThumbList.innerHTML,proMiniThumbnailList.appendChild(proNewItem),proNewItem.addEventListener("click",(function(){let provMiniThumbs;document.querySelectorAll("#prov_thumb_list li").forEach(MiniThumb=>MiniThumb.classList.remove("min_gall_selected")),this.classList.add("min_gall_selected")}))});const proweaverMiniGalleryListClass=document.querySelectorAll("#prov_thumb_list li");function useKey(e){"37"==(e=e||window.event).keyCode?(currentIndex=currentIndex>0?currentIndex-1:proweaverGalleryList.length-1,updateViewer(currentIndex),resetZoom(),viewer.css({transform:"scale(1) translate(0px, 0px)",transition:"none"})):"39"==e.keyCode&&(currentIndex=currentIndex<proweaverGalleryList.length-1?currentIndex+1:0,updateViewer(currentIndex),resetZoom(),viewer.css({transform:"scale(1) translate(0px, 0px)",transition:"none"}))}proweaverMiniGalleryListClass.forEach((galleryItems,index)=>{galleryItems.classList.add("prov_mini_gall_list"),galleryItems.addEventListener("click",(function(){let galleryItemsImg=this.querySelector("img");galleryItemsImg&&(document.getElementById("gallery_img_id_viewer").src=galleryItemsImg.src,proweaverMiniGalleryListClass.forEach(item=>item.classList.remove("selected")),this.classList.add("selected"),document.querySelector(".proweaver_gall_viewer_con").classList.add("toggleproweaver_gall_viewer_con"),document.getElementById("prov_current_gallery_show").innerHTML=index+1,currentIndex=index,highlightMatchingThumbnail(galleryItemsImg.src),proMinGallList.classList.remove("toggle_prov_min_gall_list"))}))}),document.addEventListener("keydown",(function(e){useKey(e)}));const viewer=$("#gallery_img_id_viewer");let isZoomed=!1,scale=1,isDragging=!1,startX,startY,initialTranslateX=0,initialTranslateY=0,initialTouchDistance=0;const zoomFunction=$(".zoom_function"),zoomIcon=$(".zoom_plus");function resetZoom(){scale=1,isZoomed=!1,initialTranslateX=0,initialTranslateY=0,viewer.css({transform:"scale(1) translate(0px, 0px)",transition:"transform 0.4s ease-out"}),viewer.css("cursor","default"),zoomIcon.attr("name","add-outline")}function toggleZoom(event,centerZoom=!1){const viewerOffset=viewer.offset(),viewerWidth=viewer.width(),viewerHeight=viewer.height();let mouseX,mouseY;if(centerZoom?(mouseX=viewerWidth/2,mouseY=viewerHeight/2):(mouseX=event.pageX-viewerOffset.left,mouseY=event.pageY-viewerOffset.top),isZoomed)resetZoom();else{scale=2,isZoomed=!0;const translateX=-mouseX*(scale-1)/scale,translateY=-mouseY*(scale-1)/scale;initialTranslateX=translateX,initialTranslateY=translateY,viewer.css({transform:`scale(${scale}) translate(${translateX}px, ${translateY}px)`,transition:"transform 0.4s ease-out"}),viewer.css("cursor","grab"),zoomIcon.attr("name","remove-outline")}}function startDragging(event){isZoomed&&(event.originalEvent.touches&&1===event.originalEvent.touches.length?(event.preventDefault(),isDragging=!0,startX=event.originalEvent.touches[0].clientX,startY=event.originalEvent.touches[0].clientY,viewer.css("cursor","grabbing")):event.clientX&&event.clientY&&(event.preventDefault(),isDragging=!0,startX=event.clientX,startY=event.clientY,viewer.css("cursor","grabbing")))}function stopDragging(){isZoomed&&(isDragging=!1,viewer.css("cursor","grab"))}function dragImage(event){if(isZoomed&&isDragging){let deltaX,deltaY;event.preventDefault(),event.originalEvent.touches&&1===event.originalEvent.touches.length?(deltaX=(event.originalEvent.touches[0].clientX-startX)/scale,deltaY=(event.originalEvent.touches[0].clientY-startY)/scale):event.clientX&&event.clientY&&(deltaX=(event.clientX-startX)/scale,deltaY=(event.clientY-startY)/scale),initialTranslateX+=deltaX,initialTranslateY+=deltaY,viewer.css({transform:`scale(${scale}) translate(${initialTranslateX}px, ${initialTranslateY}px)`,transition:"none"}),startX=event.clientX||event.originalEvent.touches[0].clientX,startY=event.clientY||event.originalEvent.touches[0].clientY}}function handlePinchZoom(event){if(2===event.originalEvent.touches.length){const touch1=event.originalEvent.touches[0],touch2=event.originalEvent.touches[1],touchDistance=Math.sqrt(Math.pow(touch2.clientX-touch1.clientX,2)+Math.pow(touch2.clientY-touch1.clientY,2));0===initialTouchDistance&&(initialTouchDistance=touchDistance);const scaleChange=touchDistance/initialTouchDistance;scale*=scaleChange,scale<1&&(scale=1),scale>3&&(scale=3),1===scale?resetZoom():viewer.css({transform:`scale(${scale}) translate(${initialTranslateX}px, ${initialTranslateY}px)`,transition:"transform 0.1s ease-out"}),initialTouchDistance=touchDistance}}zoomFunction.click((function(event){isZoomed?(resetZoom(event),viewer.css("cursor","default"),zoomIcon.attr("name","add-outline")):(scale=2,isZoomed=!0,viewer.css({transform:`scale(${scale})`,transition:"transform 0.4s ease-out"}),viewer.css("cursor","grab"),zoomIcon.attr("name","remove-outline"))})),viewer.on("dblclick",toggleZoom),viewer.on("mousedown",startDragging),$(document).on("mouseup",stopDragging),$(document).on("mousemove",dragImage),viewer.on("touchstart",startDragging),$(document).on("touchend",stopDragging),$(document).on("touchmove",(function(event){dragImage(event),isZoomed&&handlePinchZoom(event)}))}));